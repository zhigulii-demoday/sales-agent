<div align='center'>
  <h1>Проект "Napoleon IT Отзывы | Sales Agent"</h1>
  <p>В данном файле описано устройство проекта и даны рекомендации по его развитию и поддержке. Этот файл должен актуализироваться руководителем группы разработки и дополняться новыми сведениями по мере развития проекта.</p>
</div>

<div align='center'>
  <h1>Актуальный код находится на ветке feature</h1>
</div>
<div align='center'>
  <h1>Демка доступна по адресу http://89.169.163.130:8501/</h1>
</div>

## Содержание
 
1. [Описание проекта](#Описание-проекта)
2. [Основной функционал](#Основной-функционал)
3. [Требования](#Требования)
4. [Шаги по установке](#Шаги-по-установке)
5. [Описание файла ENV](#Описание-файла-ENV)



### Описание проекта
Проект направлен на создание универсального агента продаж, использующего большие языковые модели (LLM), для автоматизации процесса взаимодействия с компаниями от имени Napoleon IT. Основной продукт, который предлагает агент, — это Napoleon IT Отзывы, анализатор отзывов на товары с маркетплейсов. Агент автоматически инициирует общение с потенциальными клиентами и отвечает на их вопросы по продукту вплоть до назначения встречи - только на этом моменте подключается менеджер по продажам от компании.

### Основной функционал
Автоматизация общения с потенциальными клиентами через email и Telegram на основе заранее заданных скриптов.
Анализ отзывов на товары с маркетплейсов с использованием данных продукта Napoleon IT Отзывы.
Предоставление информации о продукте, ответы на запросы и создание логов общения.
Контролируемые беседы, сфокусированные на релевантных темах.
Продукт позволяет позволяет значительно сократить объем ручного труда при инициировании и поддержании бесед с клиентами.


### Требования:
- **Python ^3.11**
- **Docker**
- **^24gb VRAM**

### Шаги по установке:

1. **Клонирование репозитория**:
   ```bash
   git clone <repository-url>
   cd <project-directory>
   ```

2. **Установка зависимостей**:
   ```bash
   pip install poetry
   poetry install
   ```

3. **Запуск с Docker**:
   ```bash
   docker-compose up
   ```

4. **Запуск приложения (фронт)**:
   ```bash
   streamlit run front.py
   ```

### Шаги по установке модели:

1. **Клонирование репозитория**:
   ```bash
   git clone <repository-url>
   cd <project-directory>
   ```

2. **Установка зависимостей**:
   ```bash
   pip install poetry &&
   poetry install &&
   pip install python-multipart &&
   poetry add flashinfer -i https://flashinfer.ai/whl/cu121/torch2.4/ &&
   pip install sglang &&
   CMAKE_ARGS="-DLLAVA_BUILD=OFF" pip install -U llama-cpp-python
   ```

3. **Запуск модели**:
   ```bash
   python -m sglang.launch_server --model-path NousResearch/Meta-Llama-3.1-8B-Instruct --port 30000 --dtype bfloat16 --quantization fp8 --mem-fraction-static 0.931 --disable-cuda-graph --host 0.0.0.0
   ```

### Описание файла ENV

Файл `.env` содержит конфиденциальные настройки окружения, которые необходимы для правильной работы API. При настройке системы необходимо заполнить следующие параметры:

- **Clickhouse**
  - `CLICKHOUSE_DB`: Имя базы данных Clickhouse.
  - `CLICKHOUSE_USER`: Имя пользователя Clickhouse.
  - `CLICKHOUSE_PASSWORD`: Пароль пользователя Clickhouse.

- **PostgreSQL**
  - `POSTGRES_DB`: Имя базы данных PostgreSQL.
  - `POSTGRES_USER`: Имя пользователя базы данных.
  - `POSTGRES_PASSWORD`: Пароль для доступа к базе данных.

- **Email**
  - `EMAIL_ACCOUNT`: Аккаунт электронной почты для отправки сообщений.
  - `APP_PASSWORD`: Пароль приложения для Email (используется для SMTP/IMAP).

- **IMAP/SMTP**
  - `IMAP_SERVER`: Сервер для входящих сообщений (IMAP).
  - `IMAP_PORT`: Порт для IMAP-сервера.
  - `SMTP_SERVER`: Сервер для исходящих сообщений (SMTP).
  - `SMTP_PORT`: Порт для SMTP-сервера.

- **Telegram**
  - `TELEGRAM_API_ID`: API ID для Telegram.
  - `TELEGRAM_API_HASH`: API Hash для Telegram.
  - `PHONE_NUMBER`: Номер телефона, связанный с Telegram-аккаунтом.

- **Общие параметры**
  - `BASE_API_URL`: Базовый URL для API.
  - `CACHE_FILE`: Файл для кеширования данных.

Заполните эти параметры в файле `.env`, чтобы обеспечить корректную работу системы.
